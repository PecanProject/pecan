A generic template for adding a new model to PEcAn
========================================================

**This is a work in progress** 

Please pardon the dust

Packages developed to integrate models (PEcAn.ED, PEcAn.SIPNET, and PEcAn.BIOCRO) should be instructional and useful for reference.

Below are links to Redmine issues that describe the development of PEcAn.SIPNET and PEcAn.BioCro.

## Preliminary Steps

### These issues are the "parent" tasks for the integration of SIPNET and BioCro.

* [SIPNET](https://ebi-forecast.igb.illinois.edu/redmine/issues/552)
* [BioCro](https://ebi-forecast.igb.illinois.edu/redmine/issues/1234)

### Add model_type to models table in Database

## Inputs

### Create model-specific settings.xml template 

See Wiki: github.com/PecanProject/pecan/wiki/

* Example issues
 * [SIPNET](https://ebi-forecast.igb.illinois.edu/redmine/issues/890)
 * [BioCro](https://ebi-forecast.igb.illinois.edu/redmine/issues/1236)

### Model Meteorological Inputs 

Write function to convert netCDF met standard to format required by model 

* Examples
 * [SIPNET](https://ebi-forecast.igb.illinois.edu/redmine/issues/893)
 * [SIPNET](https://ebi-forecast.igb.illinois.edu/redmine/issues/889)
 * [BioCro](https://ebi-forecast.igb.illinois.edu/redmine/issues/1235)

### Parameter Inputs

### Map model parameters to BETY variables, priors, and constants

* Examples
 * [SIPNET](https://ebi-forecast.igb.illinois.edu/redmine/issues/891)
 * [BioCro](https://ebi-forecast.igb.illinois.edu/redmine/issues/1237)

#### Create write.config.MODEL

This function will convert the model parameter values generated by PEcAn and convert them to a format that the model can use.

PEcAn saves these parameter values in a file called `samples.RData`, and an example is provided in the package `PEcAn.utils`. 

The lists `ensemble.samples` and `sa.samples` contain parameter values for the ensemble and sensitivity analyses, respecitvely.

There is one dataframe for each Plant Functional Type (PFT), and these are contained in a list. In this example, the PFT `ebifarm.pavi` represents Switchgrass grown at the Energy Farm in Urbana, IL and modeled by ED2.

```{r}
data(samples, package = "PEcAn.utils")
ls()
names(sa.samples) #the names of one or more Plant Functional Types
head(sa.samples$ebifarm.pavi)
sa.samples
```

### Examples

* [SIPNET](https://ebi-forecast.igb.illinois.edu/redmine/issues/892
* [BioCro](https://ebi-forecast.igb.illinois.edu/redmine/issues/1240

## Outputs

### Write function to convert model output to netCDF standard 

 Examples

* [ED2, SIPNET](https://ebi-forecast.igb.illinois.edu/redmine/issues/1126)

These will ultimately be converted 

### Define Model-specific PFTs and Priors 

* Examples
 * [SIPNET](https://ebi-forecast.igb.illinois.edu/redmine/issues/1130)


```{r}

```

You can also embed plots, for example:

```{r fig.width=7, fig.height=6}
plot(cars)
```

