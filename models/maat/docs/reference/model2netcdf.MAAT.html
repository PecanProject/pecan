<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function to convert MAAT model output to standard netCDF format — model2netcdf.MAAT • PEcAn.MAAT</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Function to convert MAAT model output to standard netCDF format — model2netcdf.MAAT" />

<meta property="og:description" content="Convert MAAT output to netCDF" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PEcAn.MAAT</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/create_amerifluxLBL_drivers_for_maat.html">PEcAn: Generating met drivers for the MAAT model using AmerifluxLBL tower observations</a>
    </li>
    <li>
      <a href="../articles/running_maat_in_pecan.html">Running MAAT in PEcAn</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to convert MAAT model output to standard netCDF format</h1>
    
    <div class="hidden name"><code>model2netcdf.MAAT.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Convert MAAT output to netCDF</p>
    
    </div>

    <pre class="usage"><span class='fu'>model2netcdf.MAAT</span>(<span class='no'>rundir</span>, <span class='no'>outdir</span>, <span class='kw'>sitelat</span> <span class='kw'>=</span> -<span class='fl'>999</span>, <span class='kw'>sitelon</span> <span class='kw'>=</span> -<span class='fl'>999</span>,
  <span class='kw'>start_date</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>end_date</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>rundir</th>
      <td><p>Location of MAAT model run (i.e. MAAT project) directory with all required model run inputs.
This is needed to identify model runs with and without met drivers and control the model output conversion process</p></td>
    </tr>
    <tr>
      <th>outdir</th>
      <td><p>Location of MAAT model output</p></td>
    </tr>
    <tr>
      <th>sitelat</th>
      <td><p>Latitude of the site</p></td>
    </tr>
    <tr>
      <th>sitelon</th>
      <td><p>Longitude of the site</p></td>
    </tr>
    <tr>
      <th>start_date</th>
      <td><p>Start time of the simulation</p></td>
    </tr>
    <tr>
      <th>end_date</th>
      <td><p>End time of the simulation</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Converts all output contained in a folder to netCDF.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='no'>run_dir</span> <span class='kw'>&lt;-</span> <span class='st'>"~/scratch/run/"</span>
<span class='kw'>if</span> (! <span class='fu'>file.exists</span>(<span class='no'>run_dir</span>)) <span class='fu'>dir.create</span>(<span class='no'>run_dir</span>,<span class='kw'>recursive</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>output_dir</span> <span class='kw'>&lt;-</span> <span class='st'>"~/scratch/out/"</span>
<span class='kw'>if</span> (! <span class='fu'>file.exists</span>(<span class='no'>output_dir</span>)) <span class='fu'>dir.create</span>(<span class='no'>output_dir</span>,<span class='kw'>recursive</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>met_xml</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"leaf_user_met.xml"</span>,<span class='kw'>package</span><span class='kw'>=</span><span class='st'>"PEcAn.MAAT"</span>)
<span class='fu'>file.copy</span>(<span class='kw'>from</span> <span class='kw'>=</span> <span class='no'>met_xml</span>, <span class='kw'>to</span> <span class='kw'>=</span> <span class='no'>run_dir</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>example_output_file</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"out.csv"</span>,<span class='kw'>package</span><span class='kw'>=</span><span class='st'>"PEcAn.MAAT"</span>)
<span class='fu'>file.copy</span>(<span class='kw'>from</span> <span class='kw'>=</span> <span class='no'>example_output_file</span>, <span class='kw'>to</span> <span class='kw'>=</span> <span class='no'>output_dir</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='kw pkg'>PEcAn.MAAT</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/PEcAn.MAAT/topics/model2netcdf.MAAT'>model2netcdf.MAAT</a></span>(<span class='no'>run_dir</span>, <span class='no'>output_dir</span>, <span class='kw'>sitelat</span><span class='kw'>=</span><span class='fl'>39.9712</span>, <span class='kw'>sitelon</span><span class='kw'>=</span>-<span class='fl'>74.4346</span>,
                             <span class='kw'>start_date</span><span class='kw'>=</span><span class='st'>"2005/01/01"</span>, <span class='kw'>end_date</span><span class='kw'>=</span><span class='st'>"2005/12/31"</span>)
<span class='no'>ncfile</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>ncdf4</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/ncdf4/topics/nc_open'>nc_open</a></span>(<span class='fu'>file.path</span>(<span class='no'>output_dir</span>,<span class='st'>"2005.nc"</span>), <span class='kw'>write</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>PEcAn.utils</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/PEcAn.utils/topics/misc.convert'>misc.convert</a></span>(<span class='kw pkg'>ncdf4</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/ncdf4/topics/ncvar_get'>ncvar_get</a></span>(<span class='no'>ncfile</span>,<span class='st'>"assimilation_rate"</span>),<span class='st'>"kg C m-2 s-1"</span>, <span class='st'>"umol C m-2 s-1"</span>)
<span class='fu'>try</span>(<span class='kw pkg'>ncdf4</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/ncdf4/topics/nc_close'>nc_close</a></span>(<span class='no'>ncfile</span>))
<span class='no'>x_axis</span> <span class='kw'>&lt;-</span> <span class='fu'>seq</span>(<span class='fu'>as.Date</span>(<span class='st'>"2005/01/01"</span>), <span class='fu'>as.Date</span>(<span class='st'>"2005/12/31"</span>), <span class='kw'>length.out</span><span class='kw'>=</span><span class='fu'>length</span>(<span class='no'>dat</span>))
<span class='fu'>dev.new</span>(<span class='kw'>width</span><span class='kw'>=</span><span class='fl'>14</span>, <span class='kw'>height</span><span class='kw'>=</span><span class='fl'>8</span>, <span class='kw'>unit</span><span class='kw'>=</span><span class='st'>"in"</span>)
<span class='fu'>plot</span>(<span class='no'>x_axis</span>,<span class='no'>dat</span>,<span class='kw'>xlab</span><span class='kw'>=</span><span class='st'>"Time"</span>, <span class='kw'>ylab</span><span class='kw'>=</span><span class='st'>"Assimilation_Rate (umol/m2/s)"</span>,<span class='kw'>type</span><span class='kw'>=</span><span class='st'>"l"</span>)
<span class='fu'>dev.off</span>()
<span class='co'># }</span># NOT RUN {
# }
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Shawn Serbin, Anthony Walker

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Shawn Serbin, Anthony Walker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

