#!/usr/bin/expect
# This script use expect
# It can be installed using apt-get expect

set oldpw [lindex $argv 1]
set newpw [lindex $argv 2]
spawn passwd [lindex $argv 0]

expect "(current) UNIX password:" { send "$oldpw\r" }
expect "Enter new UNIX password:" { send "$newpw\r" }
expect "Retype new UNIX password:" { send "$newpw\r"  }

interact
