<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PEcAn functions used for managing climate driver data • PEcAn.data.atmosphere</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="PEcAn functions used for managing climate driver data">
<meta property="og:description" content="The Predictive Ecosystem Carbon Analyzer (PEcAn) is a scientific
    workflow management tool that is designed to simplify the management of
    model parameterization, execution, and analysis. The PECAn.data.atmosphere
    package converts climate driver data into a standard format for models
    integrated into PEcAn. As a standalone package, it provides an interface to
    access diverse climate data sets.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">PEcAn.data.atmosphere</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ameriflux_demo.html">PEcAn: Importing Met data from Bondville, IL Ameriflux station</a>
    </li>
    <li>
      <a href="articles/cfmet_downscaling.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="articles/compare_narr_cruncep_met.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="articles/tdm_downscaling.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="pecan-functions-for-processing-meteorological-data" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#pecan-functions-for-processing-meteorological-data" class="anchor"></a>PEcAn functions for processing meteorological data</h1></div>
<p>Converts meteorological products to PEcAn-CF formated netCDF files.</p>
<div id="supported-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#supported-formats" class="anchor"></a>Supported Formats</h2>
<p>Current list of input meteorological formats supported, functions are named <code>download.&lt;source&gt;</code> and <code>met2CF.&lt;source&gt;</code>.</p>
<ul>
<li>NCEP</li>
<li>NARR</li>
<li>Ameriflux</li>
<li>FACE</li>
<li>ALMA</li>
<li>NOAA GEFS</li>
<li>arbitrary csv files</li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"pecanproject/pecan/modules/data.atmosphere"</span>)</code></pre></div>
<p>The PEcAn.data.atmosphere package is ‘standalone’.</p>
</div>
<div id="documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h2>
<ul>
<li><a href="https://pecanproject.github.io/pecan//modules/data.atmosphere/inst/web/index.html">Package Documentation</a></li>
<li>Vignettes</li>
</ul>
</div>
<div id="pecan-variable-names" class="section level2">
<h2 class="hasAnchor">
<a href="#pecan-variable-names" class="anchor"></a>PEcAn variable names</h2>
<p>See <a href="https://pecanproject.github.io/pecan-documentation/master/met-data.html" class="uri">https://pecanproject.github.io/pecan-documentation/master/met-data.html</a></p>
<p>General Note: dates in the database should be datatime (preferably with timezone), and datetime passed around in PEcAn should be of type POSIXlt.</p>
</div>
<div id="met-data" class="section level2">
<h2 class="hasAnchor">
<a href="#met-data" class="anchor"></a>Met Data</h2>
<p>The standard met data inputs should be of the form:</p>
<p>Converters from a raw to standard format go in <code>/modules/data.atmosphere/R</code>; converters from standard to model-specific go in <code>models/&lt;mymodel&gt;/R</code>.</p>
<ul>
<li>For a number of common gridded products (NARR, CRUNCEP, ISIMIP), there are bash scripts for converting and rechunking in this repository: <a href="https://github.com/ebimodeling/model-drivers" class="uri">https://github.com/ebimodeling/model-drivers</a>; these are not generalized, but may be merged into PEcAn at some point.</li>
</ul>
<p>Examples:</p>
<ul>
<li>NARR:</li>
<li>CRUNCEP:</li>
<li>ISIMIP:</li>
</ul>
<p>Names should be <code>met2CF.&lt;sourcename&gt;</code> and <code>met2model.&lt;modelname&gt;</code>.</p>
</div>
<div id="dimensions" class="section level2">
<h2 class="hasAnchor">
<a href="#dimensions" class="anchor"></a>Dimensions:</h2>
<table class="table">
<thead><tr class="header">
<th align="left">CF standard-name</th>
<th align="left">units</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">time</td>
<td align="left">days since 1700-01-01 00:00:00 UTC</td>
</tr>
<tr class="even">
<td align="left">longitude</td>
<td align="left">degrees_east</td>
</tr>
<tr class="odd">
<td align="left">latitude</td>
<td align="left">degrees_north</td>
</tr>
</tbody>
</table>
</div>
<div id="the-variable-names-should-be-standard_name" class="section level2">
<h2 class="hasAnchor">
<a href="#the-variable-names-should-be-standard_name" class="anchor"></a>The variable names should be <code>standard_name</code>
</h2>
<table style="width:100%;" class="table">
<colgroup>
<col width="39%">
<col width="7%">
<col width="13%">
<col width="13%">
<col width="8%">
<col width="7%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">CF standard-name</th>
<th align="left">units</th>
<th align="left">bety</th>
<th align="left">isimip</th>
<th align="left">cruncep</th>
<th align="left">narr</th>
<th align="left">ameriflux</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>air_temperature</strong></td>
<td align="left">K</td>
<td align="left">airT</td>
<td align="left">tasAdjust</td>
<td align="left">tair</td>
<td align="left">air</td>
<td align="left">TA (C)</td>
</tr>
<tr class="even">
<td align="left">air_temperature_max</td>
<td align="left">K</td>
<td align="left"></td>
<td align="left">tasmaxAdjust</td>
<td align="left">NA</td>
<td align="left">tmax</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">air_temperature_min</td>
<td align="left">K</td>
<td align="left"></td>
<td align="left">tasminAdjust</td>
<td align="left">NA</td>
<td align="left">tmin</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>air_pressure</strong></td>
<td align="left">Pa</td>
<td align="left">air_pressure</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">PRESS (KPa)</td>
</tr>
<tr class="odd">
<td align="left">mole_fraction_of_carbon_dioxide_in_air</td>
<td align="left">mol/mol</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CO2</td>
</tr>
<tr class="even">
<td align="left">moisture_content_of_soil_layer</td>
<td align="left">kg m-2</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">soil_temperature</td>
<td align="left">K</td>
<td align="left">soilT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">TS1 <em>(NOT DONE)</em>
</td>
</tr>
<tr class="even">
<td align="left">relative_humidity</td>
<td align="left">%</td>
<td align="left">relative_humidity</td>
<td align="left">rhurs</td>
<td align="left">NA</td>
<td align="left">rhum</td>
<td align="left">RH</td>
</tr>
<tr class="odd">
<td align="left"><strong>specific_humidity</strong></td>
<td align="left">1</td>
<td align="left">specific_humidity</td>
<td align="left">NA</td>
<td align="left">qair</td>
<td align="left">shum</td>
<td align="left">CALC(RH)</td>
</tr>
<tr class="even">
<td align="left">water_vapor_saturation_deficit</td>
<td align="left">Pa</td>
<td align="left">VPD</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">VPD <em>(NOT DONE)</em>
</td>
</tr>
<tr class="odd">
<td align="left"><strong>surface_downwelling_longwave_flux_in_air</strong></td>
<td align="left">W m-2</td>
<td align="left">same</td>
<td align="left">rldsAdjust</td>
<td align="left">lwdown</td>
<td align="left">dlwrf</td>
<td align="left">Rgl</td>
</tr>
<tr class="even">
<td align="left"><strong>surface_downwelling_shortwave_flux_in_air</strong></td>
<td align="left">W m-2</td>
<td align="left">solar_radiation</td>
<td align="left">rsdsAdjust</td>
<td align="left">swdown</td>
<td align="left">dswrf</td>
<td align="left">Rg</td>
</tr>
<tr class="odd">
<td align="left">surface_downwelling_photosynthetic_photon_flux_in_air</td>
<td align="left">mol m-2 s-1</td>
<td align="left">PAR</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">PAR <em>(NOT DONE)</em>
</td>
</tr>
<tr class="even">
<td align="left"><strong>precipitation_flux</strong></td>
<td align="left">kg m-2 s-1</td>
<td align="left">cccc</td>
<td align="left">prAdjust</td>
<td align="left">rain</td>
<td align="left">acpc</td>
<td align="left">PREC (mm/s)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">degrees</td>
<td align="left">wind_direction</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">WD</td>
</tr>
<tr class="even">
<td align="left">wind_speed</td>
<td align="left">m/s</td>
<td align="left">Wspd</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">WS</td>
</tr>
<tr class="odd">
<td align="left"><strong>eastward_wind</strong></td>
<td align="left">m/s</td>
<td align="left">eastward_wind</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CALC(WS+WD)</td>
</tr>
<tr class="even">
<td align="left"><strong>northward_wind</strong></td>
<td align="left">m/s</td>
<td align="left">northward_wind</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CALC(WS+WD)</td>
</tr>
</tbody>
</table>
<ul>
<li>preferred variables indicated in bold</li>
<li>wind_direction has no CF equivalent and should not be converted, instead the met2CF functions should convert wind_direction and wind_speed to eastward_wind and northward_wind</li>
<li>variable names are from <a href="http://nacp.ornl.gov/MsTMIP_variables.shtml">MsTMIP</a>, but lowercase to be consistent with the MsTMIP drivers.</li>
<li>standard_name is CF-convention standard names</li>
<li>units can be converted by udunits, so these can vary (e.g. the time denominator may change with time frequency of inputs)</li>
<li>soil moisture for the full column, rather than a layer, is soil_moisture_content</li>
</ul>
<p>For the standardized files, we are using CF standard names as variable names.</p>
<p>For example, in the <a href="https://www.betydb.org/inputs/280">MsTMIP-CRUNCEP</a> data, the variable <code>rain</code> should be <code>precipitation_rate</code>. We want to standardize the units as well as part of the <code>met2CF.&lt;product&gt;</code> step. I believe we want to use the CF “canonical” units but retain the MsTMIP units any time CF is ambiguous about the units.</p>
<p>The key is to process each type of met data (site, reanalysis, forecast, climate scenario, etc) to the exact same standard. This way every operation after that (extract, gap fill, downscale, convert to a model, etc) will always have the exact same inputs. This will make everything else much simpler to code and allow us to avoid a lot of unnecessary data checking, tests, etc being repeated in every downstream function.</p>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="NA">NA</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.freebsd.org/copyright/freebsd-license.html">FreeBSD</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
