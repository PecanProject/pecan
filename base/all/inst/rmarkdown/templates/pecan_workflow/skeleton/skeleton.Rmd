---
title: "PEcAn Workflow"
author: "PEcAn User"
date: '`r format(Sys.Date(), "%B %d, %Y")`'
output: html_document
---

# Load PEcAn packages 

```{r, echo=FALSE,warning=FALSE}
# .libPaths("/path/to/stable/build")

library(PEcAn.all)
```

# Load PEcAn settings files.

Open and read in settings file for PEcAn run.

To create a pecan.xml, you can download one genrated in the PEcAn web interface or one of the `pecan.<modelname>.xml` files in the tests/ directory of the PEcAn repository (github.com/pecanproject/pecan).

```{r read.settings}
settings <- PEcAn.settings::read.settings("pecan.xml")
```

# Meta Analysis


```{r meta-analysis}

settings <- runModule.get.trait.data(settings)
runModule.run.meta.analysis(settings)

```

# Write Configuration Files

```{r run.write.configs}
settings <- runModule.run.write.configs(settings)

```

# Run Model and Retrieve Results

```{r run-model}

runModule.start.model.runs(settings)
runModule.get.results(settings)

```

# Model Analyses

These are a few core analyses; many others exist.

```{r model-analysis}
run.sensitivity.analysis()      # Run sensitivity analysis and variance decomposition on model output
run.ensemble.analysis()  	      # Run ensemble analysis on model output. 
run.ensemble.analysis(plot.timeseries=TRUE) 

```
